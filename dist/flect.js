var Flect=function(){"use strict";const t=(t,n,s,o)=>{const c=n.handler||(n.handler=new e);c[o]=s(t),n.addEventListener(o,c)};class e{t(t){this[t.type](t)}}const n=document,s=t=>n.createElement(t),o=(t,e)=>t.cloneNode(e),c=t=>t.children,r=t=>t.o||t.children,l=t=>0===t.name.indexOf("x-"),i=t=>0===t.tagName.indexOf("X-"),f=t=>!!t.content,u=t=>!!G[t.tagName],a={l(t){let e=this;e.i||(e.i=t||{}),e.u||(e.u=new Set)},h(){this.p()},m(t,e,n){let s=this,o=e.length-1;for(;o>=0;){const c=e[o],l=t[c.index];if(c.v&&(l.$=c.g,(n||s.u).add(l)),!n)for(const[t,e]of c.k){const n=e.C(s.i,l,e.O,t);n&&s.u.add(n)}c.v&&(n=!l.content&&!u(l)&&(l.u=new Set)),!n&&c.v||!c.g||s.m(r(l),c.g,n),o--}},p(){for(const t of this.u)t.h&&t.h();this.u.clear()}};function h(t){this.l(t)}h.prototype=a;let d=null,x=null;const p=t=>{const e=function(t,n){let s=x;if(n&&(x=n),void 0!==t){e.data=t;for(const t of e.S)t()}else d&&d!==x&&(e.S.add(d),d.j.add(e.S));return n&&(x=s),e.data};return e.data=t,e.F=!0,e.S=new Set,e},m=t=>{const e=d;return d=t,d.j=new Set,d.h=(t=>()=>{for(const e of t.j)e.delete(t)})(d),t(),d=e,t};let w=n.createComment(""),y=s("template"),v=n.createDocumentFragment();const $=()=>{},b=(t,...e)=>t.reduce(((n,s,o)=>n+(s+(o===t.length-1?"":e[o]))),""),g=s("style"),k="css-x";let E=1;const C=(t,e)=>"$"+(e||E)+t,O=(t,...e)=>{if("string"==typeof t)return`${k}="${C(t,E)}"`;{const s=b(t,e);g.textContent+=s,g.parentElement||n.head.appendChild(g)}},S=(t,e,n)=>{const s=n,o=t.component.M;e.setAttribute(k,C(s,o))},j=(t,e,n)=>{const s=n,o=t.ref(s);let c=!0;return m((()=>{const t=o.H();if(c){for(const n of t)n(e);c=!1}else t[t.length-1](e)}))},F=(t,e,n)=>{const s=e.style.display;return m((()=>{n(t)?s?e.style.display=s:e.style.removeProperty("display"):e.style.display="none"}))},M=(t,e,n)=>m((()=>e.textContent=n(t))),H=(t,e,n,s)=>m((()=>e.setAttribute(s,n(t)))),X=t=>"x-text"===t?M:"x-show"===t?F:"x-ref"===t?j:"x-css"===t?S:H,L=(t,e,n,s)=>{e.i=e.i||{};const o=()=>{const c=e.i[s],r=n(t);c&&c.F?c(r,o):e.i[s]=r};return m(o)},N={},T=t=>{if(N[t])return N[t];let e=Object.getPrototypeOf((function(){})).constructor,n=/^[\n\s]*if.*\(.*\)/.test(t.trim())||/^(let|const)\s/.test(t.trim())?`(()=>{ ${t} })()`:t;let s=(()=>{try{let s=new e(["scope"],`with(scope){return ${n}};`);return Object.defineProperty(s,"name",{value:`FlectExpression ${t}`}),s}catch(e){return console.error("FlectExpression error : "+t,e),!1}})();return N[t]=s,s},U=(t,e,n)=>{let s=[];const c=[{X:z()}],r=e.getAttribute("key")||"item";return e.h=()=>{for(let t=1;t<c.length;t++)c[t].L.h()},e.replaceWith(c[0].X),m((()=>{const l=n(t);!function(t,e,n,s,c,r){const l=e.content;let i=0;const f=n.length,u=s.length;let a=u-f;for(;i<f&&i<u;)n[i]!==s[i]&&c[i+1].N(s[i]),i++;const h=[],d=c[i].X;for(;a>0;){let n;const f=o(l,!0);(n=c[i+1])?n.N(s[i]):n=c[i+1]=A(t,r,s[i]),h.push(f,n.X),e.$&&n.L.m(childrenOf(f),e.$),a--,i++}h.length&&d.replaceWith(d,...h);for(;a<0;){let t=c[i].X.nextSibling;const e=c[i+1].X;for(c[i+1].L.h();t!==e;){const e=t;t=t.nextSibling,e.remove()}a++,i++}}(t,e,s,l,c,r),s=l}))};const q=(t,e,n)=>m((()=>{n(t)})),z=()=>o(w),A=(t,e,n)=>{const s=z(),o=p(n);return{X:s,N:o,L:new h({...t,[e]:o})}},B=e=>{const n=[];for(let o=0;o<e.length;o++){let c=e[o];const u=f(c),a=i(c),h={tagName:c.tagName,index:o,g:!1,v:u||a,k:new Map};let d=c.attributes.length;for(;d--;){const e=c.attributes[d];if(l(e)){const n=0===e.name.indexOf("x-on:"),o=n?e.name.substring(5):e.name.substring(2),r={O:e.value&&("ref"===o||"css"===o?e.value:T(e.value)),C:u?"x-for"===(s=e)?U:"x-if"===s?q:void 0:a?L:n?t:X(e)};h.k.set(o,r),!a&&c.removeAttribute(e.name)}}const x=r(c=c.content||c);x.length&&(h.g=B(x)),(h.k.size||h.g||h.T)&&n.push(h)}var s;return n.length>0&&n};class D extends HTMLElement{constructor(){super(),this.l(),this.U={}}onMount(){}connectedCallback(){this.q()}q(){let t=this;for(const e of t.attributes)if(l(e)){const n=e.name.substring(2);t.i[n]=p(t.i[n])}else t.i[e.name]=e.value||!0;t.i.component=t,t.i.ref=t.A,t.onMount(t.i),t.B()}onUnmount(){}h(){let t=this;t.onUnmount(t.i),t.p()}B(){let t=this;const e=t.D;let n=e.T,s=e.g,r=e.M;const l=n?$:b,i=r?$:O,f=e.G.call(t.i,p,l,i);if(f&&("string"==typeof f?(n=e.T=(t=>{let e=o(y);return e.innerHTML=t,e.content})(f),s=e.g=B(c(n))):(n=f===t?t:(t=>{let e=o(v);return e.append(...t),e})(f),s=t.$||B(t.o||n.children))),t.M=e.M=r||E++,e.T&&(n=o(n,!0)),s&&t.m(t.o||c(n),s),n!==t){const e=t.parentNode;e.o||(e.o=[].slice.call(c(e))),t.replaceWith(n)}}A(t,e){const n=this.component.U[t]||(this.component.U[t]=(()=>{const t=[];return t.H=p([]),t})());if(!e)return n;n.push(e),n.H(n)}}Object.assign(D.prototype,a);const G={};return{define:(t,e)=>{const n="X-"+t.toUpperCase();if(G[n])throw`x-${t} is already defined`;return G[n]=class extends D{constructor(){super()}},G[n].G=e,G[n].prototype.D=G[n],customElements.define(`x-${t}`,G[n]),G[n]},signal:p}}();
