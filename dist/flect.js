var Flect=function(){"use strict";const t=(t,n,s,o)=>{const r=n.handler||(n.handler=new e);r[o]=s(t),n.addEventListener(o,r)};class e{t(t){this[t.type](t)}}const n=document,s=t=>n.createElement(t),o=(t,e)=>t.cloneNode(e),r=t=>t.children,c=t=>t.o||t.children,l=(t,e)=>t.name.substring(e),i=t=>0===t.name.indexOf("x-"),u=t=>0===t.tagName.indexOf("X-"),f=t=>!!t.content,a=t=>!!_[t.tagName]||f(t),p={l(t){let e=this;e.i||(e.i=t||{}),e.u||(e.u=new Set)},p(){this.h()},m(t,e,n){let s=this,o=e.length-1,r=n;for(;o>=0;){const l=e[o],i=t[l.v];if(l.g&&(i.$=l.S,(n||s.u).add(i)),!n)for(const[t,e]of l.j){const n=e.k(s.i,i,e.C,t);n&&s.u.add(n)}if(l.S){(!l.g||(r=!a(i)&&(i.u=new Set)))&&s.m(c(i),l.S,r)}o--}},h(){for(const t of this.u)t.p&&t.p();this.u.clear()}};function h(t){this.l(t)}h.prototype=p;let d=null;const x=t=>{const e=t=>{if(void 0!==t){e.data=t;for(const t of e.F)t()}else d&&(e.F.add(d),d.L.add(e.F));return e.data};return e.data=t,e.M=!0,e.F=new Set,e.effect=e.F,e},m=t=>{const e=d;return d=t,d.L=new Set,d.p=(t=>()=>{for(const e of t.L)e.delete(t)})(d),t(),d=e,t};let w=n.createComment(""),v=s("template"),y=n.createDocumentFragment();const g=()=>{},b=(t,...e)=>t.reduce(((n,s,o)=>n+(s+(o===t.length-1?"":e[o]))),""),E=s("style"),$="css-x";let S=1;const j=(t,e)=>"$"+(e||S)+t,k=(t,...e)=>{if("string"==typeof t)return`${$}="${j(t,S)}"`;{const s=b(t,e);E.textContent+=s,E.parentElement||n.head.appendChild(E)}},C=(t,e,n)=>{const s=n,o=t.component.O;e.setAttribute($,j(s,o))},F=(t,e,n)=>{const s=n,o=t.ref(s);let r=!0;return m((()=>{const t=o.H();if(r){for(const n of t)n(e);r=!1}else t[t.length-1](e)}))},L=(t,e,n)=>{const s=e.style.display;return m((()=>{n(t)?s?e.style.display=s:e.style.removeProperty("display"):e.style.display="none"}))},M=(t,e,n)=>m((()=>e.textContent=n(t))),O=(t,e,n,s)=>m((()=>e.setAttribute(s,n(t)))),H=t=>"x-text"===t?M:"x-show"===t?L:"x-ref"===t?F:"x-css"===t?C:O,R=(t,e,n,s)=>{e.i||(e.i={});let o=null;const r={R:(t,e)=>o={U:t,X:e}},c=m((()=>{const o=e.i[s],c=n(t);o&&o.M?r.R(o,c):e.i[s]=c}));return o&&o.U(o.X),r.R=(t,e)=>t(e),c},U={},X=t=>{if(U[t])return U[t];let e=Object.getPrototypeOf((function(){})).constructor,n=/^[\n\s]*if.*\(.*\)/.test(t.trim())||/^(let|const)\s/.test(t.trim())?`(()=>{ ${t} })()`:t;let s=(()=>{try{let s=new e(["scope"],`with(scope){return ${n}};`);return Object.defineProperty(s,"name",{value:`FlectExp "${t}"`}),s}catch(e){return console.error("FlectExp error : "+t,e),!1}})();return U[t]=s,s},T=(t,e,n)=>{N(e);let s=[];const o="item",r=e.getAttribute(o)||o;return m((()=>{const o=n(t);((t,e,n,s,o)=>{let r=0;const c=n.length,l=s.length;let i=l-c;for(;r<c&&r<l;)n[r]!==s[r]&&J(e,r,s[r]),r++;for(;i>0;)I(e,t,r,o,s[r]),i--,r++;for(;i<0;)K(e,r),i++,r++})(t,e,s,o,r),s=o}))},V=(t,e,n)=>{N(e);let s=!1;return m((()=>{const o=!!n(t);o!==s&&(s=o,o?I(e,t,0):K(e,0))}))};let q=location;const z=()=>q.pathname+q.search,A=x(z());addEventListener("popstate",(()=>{q=location,A(z())}));const B=t=>{if("string"==typeof t){const e=new URL(t,q);q.href!==e.href&&(q=e,history.pushState({},"",q),A(z()))}else{t.preventDefault();const e=t.currentTarget.href;if(e)return B(e)}return z()},D=(t,e,n)=>{N(e);const s=new RegExp(n||"."),o="params",r=e.getAttribute(o)||o;let c=null;return m((()=>{const n=A().match(s)||null;n!==c&&(n&&c?J(e,0,n):n?I(e,t,0,r,n):K(e,0)),c=n}))},G=()=>o(w),I=(t,e,n,s,c)=>{const l=t.T;let i=l[n+1];const u=o(t.content,!0);i?i.U&&i.U(c):i=l[n+1]=((t,e,n,s)=>{const o=G(),r=n&&x(s);return r&&(r.index=e),{V:o,q:new h(n?{...t,[n]:r}:t),U:r}})(e,n,s,c),t.$&&i.q.m(r(u),t.$),l[n].V.replaceWith(l[n].V,u,i.V)},J=(t,e,n)=>{t.T[e+1].U(n)},K=(t,e)=>{const n=t.T;let s=n[e].V.nextSibling;const o=n[e+1].V;for(n[e+1].q.p();s!==o;){const t=s;s=s.nextSibling,t.remove()}},N=t=>{t.T=[{V:G()}],t.p=()=>{for(let e=1;e<t.T.length;e++)t.T[e].q.p()},t.replaceWith(t.T[0].V)};let P={},Q=null;const W=t=>{P[t]&&(P[t](),P[t]=!1)},Y=e=>{const n=[];for(let o=0;o<e.length;o++){let r=e[o];const a=f(r),p=!a&&u(r),h={v:o,S:!1,g:a||p,j:new Map};p&&Q&&Q(r.tagName);let d=r.attributes.length;for(;d--;){const e=r.attributes[d];if(i(e)){const n=0===e.name.indexOf("x-on:"),o=l(e,n?5:2),c={C:"ref"===o||"css"===o||"route"===o?e.value:X(e.value||""),k:p?R:a?"x-for"===(s=e.name)?T:"x-if"===s?V:"x-route"===s?D:void 0:n?t:H(e.name)};h.j.set(o,c),!p&&r.removeAttribute(e.name)}}const x=c(r=r.content||r);x.length&&(h.S=Y(x)),(h.j.size||h.S)&&n.push(h)}var s;return n.length>0&&n};class Z extends HTMLElement{constructor(){super(),this.l(),this.A={}}onMount(){}connectedCallback(){let t=this,e=t.i;for(const n of t.attributes)if(i(n)){const t=l(n,2);e[t]=x(e[t])}else e[n.name]=n.value||!0;e.component=t,e.ref=t.B,t.onMount(e),t.D()}onUnmount(){}p(){let t=this;t.onUnmount(t.i),t.h()}D(){let t=this;const e=t.G;let n=e.I,s=e.S,c=e.O;const l=n?g:b,i=c?g:k,u=e.J.call(t.i,x,l,i);if(u&&("string"==typeof u?(n=e.I=(t=>{let e=o(v);return e.innerHTML=t,e.content})(u),s=e.S=Y(r(n))):(n=u===t?t:(t=>{let e=o(y);return e.append(...t),e})(u),s=t.$||Y(t.o||r(n)))),t.O=e.O=c||S++,e.I&&(n=o(n,!0)),s&&t.m(t.o||r(n),s),n!==t){const e=t.parentNode;e.o||(e.o=[].slice.call(r(e))),t.replaceWith(n)}}B(t,e){const n=this.component.A,s=n[t]||(n[t]=(()=>{const t=[];return t.H=x([]),t})());if(!e)return s;s.push(e),s.H(s)}}Object.assign(Z.prototype,p);const _={};return{define:(t,e)=>{const n="X-"+t.toUpperCase();return _[n]=class extends Z{constructor(){super()}},_[n].J=e,_[n].prototype.G=_[n],customElements.define(`x-${t}`,_[n]),_[n]},signal:x,observe:t=>{P={...t,...P},Q=W},navigate:B}}();
