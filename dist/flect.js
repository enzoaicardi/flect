!function(){"use strict";class t extends HTMLElement{static t=new DOMParser;constructor(){super(),this.i=!0,this.h={},this.l=this.l||{},this.o=this.o||!1,this.hasAttribute("noinit")||this.init()}init(){this.u(),this.m(),this.p()}ref(t){return this.h[t]?this.h[t][0]:void 0}refs(t){return this.h[t]}D(t,s,e){if("string"==typeof s)return!1;for(let h in s){var i=!0;let f=t+"."+h;this.D(f,s[h],e)||e(f,s[h])}return i||!1}m(){this.l.body=[].slice.call(this.childNodes),this.l.v=this.innerHTML,this.l.text=this.textContent;for(let t of this.attributes)if("x"!==t.name[0]||"-"!==t.name[1])if("datas-"===t.name.substring(0,6)){let s=t.name.substring(6),e=JSON.parse(t.value);this.flat(s,e)}else this.l[t.name]=t.value}u(){this.M={O:{},effect(t,s,e,i){this.O[t]||(this.O[t]=new Map),this.O[t].get(s)||this.O[t].set(s,[]),this.O[t].get(s).push(e),e(i,s)},clear(t,s){s?this.O[t].delete(s):delete this.O[t]},set(t,s,e){if(t[s]=e,this.O[s])for(let[t,i]of this.O[s])for(let s of i)s(e,t);return!0}},this.$=new Proxy(this.l,this.M)}p(){this.P.g.call(this,this.$,this.A.bind(this))}S(t,s){this.h[t]||(this.h[t]=[]),this.h[t].push(s)}flat(t,s){this.$[t]=s,this.D(t,s,((t,s)=>{this.$[t]=s}))}A(s){if(!s)return;this.P.j||(this.P.j=t.t.parseFromString(s,"text/html")),this.k=this.P.j.cloneNode(!0).body,this.C(this.k);const e=this.k.childNodes;for(let t of e)t.o=this.o,t.composite=this,this.P.style&&1===t.nodeType&&t.setAttribute("style-ref",this.P.style);this.replaceWith(...e)}effect(t,s){this.M.effect(t,this,s,this.l[t])}F(t,s,e){let i=t.querySelectorAll("*");for(let t of i)for(let i of t.attributes)"x"===i.name[0]&&"-"===i.name[1]&&i.value===s&&t.setAttribute(i.name,e)}H(t){"X"===t.tagName[0]&&"-"===t.tagName[1]?this.J(t):this.L(t)}N(t){this.H(t);let s=t.querySelectorAll(":scope > *");for(let t of s)this.N(t)}C(t){let s=t.querySelectorAll(":scope > *");for(let t of s)this.N(t)}R(t,s,e){this.M.effect(s,t,((t,s)=>{s.$[e]=t}),this.l[s])}J(t){for(let s of t.attributes)if("x"===s.name[0]&&"-"===s.name[1]){let e=s.name.substring(2);t.l||(t.l={}),"datas-"===e.substring(0,6)&&(e=e.substring(6),this.D("",this.l[s.value],(i=>{this.R(t,s.value+i,e+i)}))),this.R(t,s.value,e)}}L(t){for(let s=0,e=0;s<t.attributes.length;s++,e++){let e=t.attributes[s],i=!0;if("x"===e.name[0]&&"-"===e.name[1]){let s=e.name.substring(2),i=(t,e)=>{e.setAttribute(s,t)};if("text"===s)i=(t,s)=>{s.textContent=t};else if("html"===s)i=(t,s)=>{s.innerHTML=t};else if("append"===s)i=(t,s)=>{t.length?s.append(...t):s.append(t)};else if("prepend"===s)i=(t,s)=>{t.length?s.prepend(...t):s.prepend(t)};else if("toggle"===s)i=(t,s)=>{s.classList.toggle(t,t)};else if("show"===s)i=(t,s)=>{t?s.style.removeProperty("display"):s.style.display="none"};else if("if"===s||"unless"===s)i=(t,e)=>{e.T||(e.T=document.createElement("div"));let i=e.childNodes.length;"if"===s?t&&!i?this.X(e.T,e):!t&&i&&this.X(e,e.T):"unless"===s&&(t&&i?this.X(e,e.T):t||i||this.X(e.T,e))};else if("for"===s){const t=e.value;i=(s,e)=>{e.q||(e.q=[],e.B=0,e.G=document.createElement("div"),this.X(e,e.G));let i="number"==typeof s,h=!i&&e.getAttribute("var"),f=i?s:s.length,l=f-e.B;if(l>0){for(let i=0;i<e.B+l&&i<f;i++)if(h&&(this.$[t+"."+i]=s[i]),i>=e.B){if(!e.q[i]){let s=e.G.cloneNode(!0);h&&this.F(s,h,t+"."+i),s.childNodes.forEach((t=>{t.o=i})),this.C(s),e.q.push(s)}this.X(e.q[i],e)}}else if(l<0)for(let t=e.B-1;t>e.B-1+l&&t>=0;t--)for(;e.childNodes.length;){let s=e.childNodes[e.childNodes.length-1];if(s.o!==t)break;e.q[t].prepend(s)}e.B+=l}}this.M.effect(e.value,t,i,this.l[e.value])}else"ref"===e.name?this.S(e.value,t):i=!1;i&&(t.removeAttribute(e.name),s--)}}X(t,s){for(;t.childNodes.length;){let e=t.childNodes[0];s.appendChild(e)}}}customElements.define("x-element-prototype-factory",t);let s,e=0;window.define=function(i,h,f){let l=`x${i}Element`;if(window[l])throw`Element x-${i} is already defined !`;if(!h)throw`Element x-${i} need a render function !`;window[l]=class extends t{constructor(){super()}static name=i;static g=h;static j=!1;static style=!!f&&function(t){s||(s=document.createElement("style"),s.id="x-scoped-stylesheet",document.head.appendChild(s));let i="x"+e++,h=`[style-ref="${i}"]`;return s.textContent+=t(h),i}(f)},window[l].prototype.P=window[l],customElements.define(`x-${i}`,window[l])}}();
