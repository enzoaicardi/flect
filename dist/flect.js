var Flect=function(){"use strict";const t=(t,n,s,o)=>{const r=n.handler||(n.handler=new e);r[o]=s(t),n.addEventListener(o,r)};class e{t(t){this[t.type](t)}}const n=document,s=t=>n.createElement(t),o=(t,e)=>t.cloneNode(e),r=t=>t.children,c=t=>t.o||t.children,l=(t,e)=>t.name.substring(e),i=t=>0===t.name.indexOf("x-"),f=t=>0===t.tagName.indexOf("X-"),u=t=>!!t.content,a=t=>!!G[t.tagName]||u(t),h={l(t){let e=this;e.i||(e.i=t||{}),e.u||(e.u=new Set)},h(){this.p()},m(t,e,n){let s=this,o=e.length-1;for(;o>=0;){const r=e[o],l=t[r.v];if(r.g&&(l.$=r.S,(n||s.u).add(l)),!n)for(const[t,e]of r.k){const n=e.j(s.i,l,e.C,t);n&&s.u.add(n)}if(r.S){(!r.g||(n=!a(l)&&(l.u=new Set)))&&s.m(c(l),r.S,n)}o--}},p(){for(const t of this.u)t.h&&t.h();this.u.clear()}};function p(t){this.l(t)}p.prototype=h;let d=null;const x=t=>{const e=function(t){if(void 0!==t){e.data=t;for(const t of e.F)t()}else d&&(e.F.add(d),d.M.add(e.F));return e.data};return e.data=t,e.O=!0,e.F=new Set,e.effect=e.F,e},m=t=>{const e=d;return d=t,d.M=new Set,d.h=(t=>()=>{for(const e of t.M)e.delete(t)})(d),t(),d=e,t};let w=n.createComment(""),y=s("template"),v=n.createDocumentFragment();const b=()=>{},g=(t,...e)=>t.reduce(((n,s,o)=>n+(s+(o===t.length-1?"":e[o]))),""),$=s("style"),E="css-x";let S=1;const k=(t,e)=>"$"+(e||S)+t,j=(t,...e)=>{if("string"==typeof t)return`${E}="${k(t,S)}"`;{const s=g(t,e);$.textContent+=s,$.parentElement||n.head.appendChild($)}},C=(t,e,n)=>{const s=n,o=t.component.H;e.setAttribute(E,k(s,o))},F=(t,e,n)=>{const s=n,o=t.ref(s);let r=!0;return m((()=>{const t=o.X();if(r){for(const n of t)n(e);r=!1}else t[t.length-1](e)}))},M=(t,e,n)=>{const s=e.style.display;return m((()=>{n(t)?s?e.style.display=s:e.style.removeProperty("display"):e.style.display="none"}))},O=(t,e,n)=>m((()=>e.textContent=n(t))),H=(t,e,n,s)=>m((()=>e.setAttribute(s,n(t)))),X=t=>"x-text"===t?O:"x-show"===t?M:"x-ref"===t?F:"x-css"===t?C:H,L=(t,e,n,s)=>{e.i||(e.i={});let o=null;const r={L:(t,e)=>o={T:t,U:e}},c=m((()=>{const o=e.i[s],c=n(t);o&&o.O?r.L(o,c):e.i[s]=c}));return o&&o.T(o.U),r.L=(t,e)=>t(e),c},T={},U=t=>{if(T[t])return T[t];let e=Object.getPrototypeOf((function(){})).constructor,n=/^[\n\s]*if.*\(.*\)/.test(t.trim())||/^(let|const)\s/.test(t.trim())?`(()=>{ ${t} })()`:t;let s=(()=>{try{let s=new e(["scope"],`with(scope){return ${n}};`);return Object.defineProperty(s,"name",{value:`FlectExpression ${t}`}),s}catch(e){return console.error("FlectExpression error : "+t,e),!1}})();return T[t]=s,s},V=(t,e,n)=>{let s=[];const c=[{V:z()}],l=e.getAttribute("key")||"item";return e.h=()=>{for(let t=1;t<c.length;t++)c[t].q.h()},e.replaceWith(c[0].V),m((()=>{const i=n(t);!function(t,e,n,s,c,l){const i=e.content;let f=0;const u=n.length,a=s.length;let h=a-u;for(;f<u&&f<a;)n[f]!==s[f]&&c[f+1].T(s[f]),f++;const p=[],d=c[f].V;for(;h>0;){let n;const u=o(i,!0);(n=c[f+1])?n.T(s[f]):n=c[f+1]=A(t,l,s[f]),p.push(u,n.V),e.$&&n.q.m(r(u),e.$),h--,f++}p.length&&d.replaceWith(d,...p);for(;h<0;){let t=c[f].V.nextSibling;const e=c[f+1].V;for(c[f+1].q.h();t!==e;){const e=t;t=t.nextSibling,e.remove()}h++,f++}}(t,e,s,i,c,l),s=i}))};const q=(t,e,n)=>m((()=>{n(t)})),z=()=>o(w),A=(t,e,n)=>{const s=z(),o=x(n);return{V:s,T:o,q:new p({...t,[e]:o})}},B=e=>{const n=[];for(let o=0;o<e.length;o++){let r=e[o];const a=u(r),h=!a&&f(r),p={v:o,S:!1,g:a||h,k:new Map};let d=r.attributes.length;for(;d--;){const e=r.attributes[d];if(i(e)){const n=0===e.name.indexOf("x-on:"),o=l(e,n?5:2),c={C:e.value&&("ref"===o||"css"===o?e.value:U(e.value)),j:h?L:a?"x-for"===(s=e.name)?V:"x-if"===s?q:void 0:n?t:X(e.name)};p.k.set(o,c),!h&&r.removeAttribute(e.name)}}const x=c(r=r.content||r);x.length&&(p.S=B(x)),(p.k.size||p.S)&&n.push(p)}var s;return n.length>0&&n};class D extends HTMLElement{constructor(){super(),this.l(),this.A={}}onMount(){}connectedCallback(){let t=this,e=t.i;for(const n of t.attributes)if(i(n)){const t=l(n,2);e[t]=x(e[t])}else e[n.name]=n.value||!0;e.component=t,e.ref=t.B,t.onMount(e),t.D()}onUnmount(){}h(){let t=this;t.onUnmount(t.i),t.p()}D(){let t=this;const e=t.G;let n=e.I,s=e.S,c=e.H;const l=n?b:g,i=c?b:j,f=e.J.call(t.i,x,l,i);if(f&&("string"==typeof f?(n=e.I=(t=>{let e=o(y);return e.innerHTML=t,e.content})(f),s=e.S=B(r(n))):(n=f===t?t:(t=>{let e=o(v);return e.append(...t),e})(f),s=t.$||B(t.o||r(n)))),t.H=e.H=c||S++,e.I&&(n=o(n,!0)),s&&t.m(t.o||r(n),s),n!==t){const e=t.parentNode;e.o||(e.o=[].slice.call(r(e))),t.replaceWith(n)}}B(t,e){const n=this.component.A[t]||(this.component.A[t]=(()=>{const t=[];return t.X=x([]),t})());if(!e)return n;n.push(e),n.X(n)}}Object.assign(D.prototype,h);const G={};return{define:(t,e)=>{const n="X-"+t.toUpperCase();return G[n]=class extends D{constructor(){super()}},G[n].J=e,G[n].prototype.G=G[n],customElements.define(`x-${t}`,G[n]),G[n]},signal:x}}();
